// Initialize Leaflet map
const map = L.map('map').setView([43.9146, -69.7987], 9); // Centered on Woolwich, Maine

// Add a basemap
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// Function to fetch and display the snowfall forecast
tasync function fetchSnowfallForecast() {
    const apiUrl = 'https://api.weather.gov/gridpoints/GYX/44,79/forecast'; // Adjust grid point if necessary

    try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        
        if (data && data.properties && data.properties.periods) {
            const periods = data.properties.periods;
            const snowfallData = periods.filter(period => period.shortForecast.includes('snow'));

            if (snowfallData.length > 0) {
                let forecastText = '<h3>Snowfall Forecast for Woolwich, ME</h3><ul>';
                snowfallData.forEach(period => {
                    forecastText += `<li><strong>${period.name}:</strong> ${period.detailedForecast}</li>`;
                });
                forecastText += '</ul>';
                
                document.getElementById('forecast').innerHTML = forecastText;
            } else {
                document.getElementById('forecast').innerHTML = '<p>No significant snowfall expected.</p>';
            }
        }
    } catch (error) {
        console.error('Error fetching snowfall forecast:', error);
        document.getElementById('forecast').innerHTML = '<p>Error loading forecast data.</p>';
    }
}

fetchSnowfallForecast();
